<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PredaIoT | Autonomous Profit Optimization</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght[300..700]&family=Share+Tech+Mono&family=Amiri:wght[400..700]&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>

    <style>
        /* --- CORE STYLES --- */
        :root {
            --neon-cyan: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-green: #0aff0a;
            --dark-bg: #050510;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
        }

        /* Typography */
        h1, h2, h3, .brand-font { font-family: 'Orbitron', sans-serif; }
        .mono-font { font-family: 'Share Tech Mono', monospace; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--neon-cyan); border-radius: 4px; }

        /* Glassmorphism */
        .glass-panel {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* Effects */
        .neon-text { text-shadow: 0 0 10px rgba(0, 243, 255, 0.7); }
        .neon-green-text { text-shadow: 0 0 10px rgba(10, 255, 10, 0.7); }
        
        @keyframes scan {
            0% { top: 0; } 50% { top: 100%; } 100% { top: 0; }
        }
        .scan-line {
            position: absolute; width: 100%; height: 2px;
            background: var(--neon-cyan); opacity: 0.5;
            animation: scan 4s linear infinite;
        }

        /* Chat Widget Specifics */
        #chat-widget { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .chat-msg-bot { background: rgba(0, 243, 255, 0.1); border-left: 3px solid var(--neon-cyan); }
        .chat-msg-user { background: rgba(188, 19, 254, 0.1); border-right: 3px solid var(--neon-purple); text-align: right; }
        
        /* 3D Canvas */
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.4; }
        
        .typing-dot {
            animation: bounce 1.4s infinite ease-in-out both;
            background-color: white; border-radius: 50%; display: inline-block; height: 6px; width: 6px; margin: 0 2px;
        }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="antialiased">

    <div id="canvas-container"></div>

    <nav class="fixed w-full z-50 glass-panel border-b-0 border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <span class="text-2xl font-bold tracking-widest brand-font text-white">PREDA<span class="text-cyan-400">IoT</span></span>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#home" class="text-white hover:text-cyan-400 px-3 py-2 rounded-md text-lg font-medium">Home</a>
                        <a href="#engine" class="text-white hover:text-cyan-400 px-3 py-2 rounded-md text-lg font-medium">EDE Engine</a>
                        <a href="#case-study" class="text-white hover:text-cyan-400 px-3 py-2 rounded-md text-lg font-medium">Live Demo</a>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button class="text-gray-400 hover:text-white p-2">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section id="home" class="min-h-screen flex items-center justify-center relative px-4 pt-20">
            <div class="text-center max-w-6xl mx-auto z-10">
                <div class="inline-flex items-center gap-2 mb-6 px-4 py-2 rounded-full border border-green-500/30 bg-green-900/10 backdrop-blur-sm animate-pulse">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-green-400 font-bold tracking-widest text-xs mono-font">EDE V2.0 MICROSERVICES ACTIVE</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-black mb-6 leading-tight tracking-tight">
                    PLUG THE <span class="text-red-500">$500B</span> LEAK<br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-500 neon-text">AUTONOMOUS PROFIT</span>
                </h1>
                
                <p class="mt-4 max-w-3xl mx-auto text-xl md:text-2xl text-gray-300 font-light leading-relaxed">
                    We don't just predict failure. We prescribe <span class="text-cyan-400 font-bold">Profitability</span>.
                    Transforming industrial assets from <span class="text-red-400 line-through decoration-red-500">cost centers</span> to autonomous profit centers.
                </p>
                
                <div class="mt-10 flex flex-col sm:flex-row justify-center gap-6">
                    <button onclick="toggleModal('generator-modal')" class="group relative px-8 py-4 bg-cyan-500/10 border border-cyan-500 text-cyan-400 font-bold text-lg hover:bg-cyan-500 hover:text-black transition-all duration-300">
                        ‚ú® GENERATE STRATEGY
                    </button>
                    <button onclick="toggleChat()" class="group relative px-8 py-4 bg-purple-500/10 border border-purple-500 text-purple-400 font-bold text-lg hover:bg-purple-500 hover:text-white transition-all duration-300">
                        <i class="fas fa-robot mr-2"></i> PREDA AGENT
                    </button>
                </div>
            </div>
        </section>

        <section id="engine" class="py-24 relative overflow-hidden">
             <div class="max-w-7xl mx-auto px-4">
                <h2 class="text-4xl font-bold mb-6 brand-font"><span class="text-cyan-400">///</span> ECONOMIC DECISION ENGINE</h2>
                <div class="glass-panel p-6 rounded-lg border border-gray-700">
                    <div class="font-mono text-sm text-green-400 mb-2">$ system_status --check</div>
                    <p class="text-gray-300">Graph AI Logic loaded. Python Microservices ready.</p>
                </div>
             </div>
        </section>
    </main>

    <div id="generator-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/90 transition-opacity backdrop-blur-sm" onclick="toggleModal('generator-modal')"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center">
                <div class="relative transform overflow-hidden rounded-lg glass-panel border border-pink-500/30 text-left shadow-2xl shadow-pink-500/20 transition-all sm:w-full sm:max-w-2xl">
                    <div class="p-6">
                        <div class="sm:flex sm:items-start">
                            <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-pink-900/50 sm:mx-0 sm:h-10 sm:w-10">
                                <i class="fas fa-magic text-pink-400"></i>
                            </div>
                            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
                                <h3 class="text-xl font-bold text-white brand-font">‚ú® Neural Strategy Generator</h3>
                                <div class="mt-4">
                                    <p class="text-sm text-gray-300 mb-4">
                                        Describe your facility (e.g., "A 5000sqm textile factory with 50 weaving machines") and our AI will generate a predictive IoT deployment plan.
                                    </p>
                                    <textarea id="strategy-input" rows="3" class="w-full bg-black/50 border border-gray-600 rounded-md p-3 text-white focus:border-pink-500 focus:outline-none font-mono text-sm" placeholder="Enter facility details..."></textarea>
                                    
                                    <div id="strategy-output-container" class="mt-4 hidden">
                                        <div class="h-0.5 w-full bg-gradient-to-r from-transparent via-pink-500 to-transparent mb-4"></div>
                                        <div id="strategy-content" class="prose prose-invert max-w-none text-sm text-gray-300 max-h-64 overflow-y-auto bg-black/30 p-4 rounded border border-white/10 font-mono">
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-black/40 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-white/10 gap-2">
                        <button type="button" onclick="runAI('strategy')" id="btn-generate" class="inline-flex w-full justify-center rounded-md bg-pink-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-pink-500 sm:ml-3 sm:w-auto">
                            Generate Plan
                        </button>
                        <button type="button" onclick="toggleModal('generator-modal')" class="mt-3 inline-flex w-full justify-center rounded-md bg-white/5 px-3 py-2 text-sm font-semibold text-gray-300 shadow-sm ring-1 ring-inset ring-gray-700 hover:bg-white/10 sm:mt-0 sm:w-auto">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="chat-widget" class="fixed bottom-4 right-4 w-96 z-50 transform translate-y-[150%] transition-transform duration-500">
        <div class="glass-panel rounded-t-lg border border-purple-500/50 shadow-2xl overflow-hidden flex flex-col h-[500px]">
            <div class="bg-purple-900/40 p-3 flex justify-between items-center border-b border-purple-500/30">
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="font-bold font-mono text-purple-300">PREDA_AGENT_V2</span>
                </div>
                <button onclick="toggleChat()" class="text-gray-400 hover:text-white"><i class="fas fa-times"></i></button>
            </div>
            
            <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 bg-black/60 scrollbar-thin">
                <div class="chat-msg-bot p-3 rounded-r-lg rounded-bl-lg text-sm text-gray-200">
                    <span class="text-xs text-cyan-400 block mb-1 font-mono">SYSTEM</span>
                    Hello. I am the Preda Economic Engine. I can calculate ROI for predictive maintenance or analyze asset health. How can I help?
                </div>
            </div>

            <div class="p-3 bg-black/80 border-t border-purple-500/30">
                <div class="flex gap-2">
                    <input type="text" id="chat-input" class="flex-1 bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-purple-500 focus:outline-none" placeholder="Ask about ROI or sensors..." onkeypress="handleChatKey(event)">
                    <button onclick="runAI('chat')" class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. Initialize Markdown Parser
        const md = window.markdownit();

        // 2. UI Toggles
        function toggleModal(id) {
            const el = document.getElementById(id);
            el.classList.toggle('hidden');
        }

        function toggleChat() {
            const el = document.getElementById('chat-widget');
            if (el.classList.contains('translate-y-[150%]')) {
                el.classList.remove('translate-y-[150%]');
            } else {
                el.classList.add('translate-y-[150%]');
            }
        }

        // 3. AI LOGIC CENTER (Simulated for Demo + Ready for API)
        async function runAI(mode) {
            let inputRaw, outputContainer, btnId;

            if (mode === 'strategy') {
                inputRaw = document.getElementById('strategy-input').value;
                outputContainer = document.getElementById('strategy-content');
                document.getElementById('strategy-output-container').classList.remove('hidden');
                btnId = 'btn-generate';
            } else {
                inputRaw = document.getElementById('chat-input').value;
                outputContainer = document.getElementById('chat-messages');
                // Add user message to chat immediately
                outputContainer.innerHTML += `
                    <div class="chat-msg-user p-3 rounded-l-lg rounded-br-lg text-sm text-gray-200 ml-auto max-w-[80%] mb-4">
                        ${inputRaw}
                    </div>
                `;
                document.getElementById('chat-input').value = '';
                outputContainer.scrollTop = outputContainer.scrollHeight;
                btnId = null; 
            }

            if (!inputRaw) return;

            // Loading State
            if(btnId) {
                const btn = document.getElementById(btnId);
                const originalText = btn.innerText;
                btn.innerText = "Processing...";
                btn.disabled = true;
            } else {
                 outputContainer.innerHTML += `<div id="temp-loading" class="text-xs text-gray-500 p-2"><span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span></div>`;
                 outputContainer.scrollTop = outputContainer.scrollHeight;
            }

            // --- AI SIMULATION LOGIC ---
            // This allows the website to work IMMEDIATELY without an API Key for demonstration.
            // If you have a key, see the "REAL API FETCH" section below.
            
            setTimeout(async () => {
                let aiResponseText = "";
                const lowerInput = inputRaw.toLowerCase();

                // Logic to generate smart-looking fake responses based on keywords
                if (mode === 'strategy') {
                    if (lowerInput.includes("solar") || lowerInput.includes("energy")) {
                        aiResponseText = `### ‚òÄÔ∏è Solar Facility Optimization Plan\n\n**1. Sensor Deployment:**\n* **Pyranometers (Class A):** 1 per 5MW block to measure irradiance.\n* **String Monitoring Units:** Deploy on every combiner box.\n* **Module Temp Sensors:** Back-of-panel, 1 per array.\n\n**2. Economic ROI Projection:**\n* **Predicted Downtime Reduction:** 18%\n* **Annual Savings:** $142,000\n* **Payback Period:** 7.2 Months\n\n**3. AI Model:**\nUse *Random Forest Regressor* to correlate irradiance vs. output, flagging soiling losses >2%.`;
                    } else if (lowerInput.includes("textile") || lowerInput.includes("factory")) {
                        aiResponseText = `### üè≠ Textile Factory Smart Retrofit\n\n**1. Vibration Analysis:**\n* Install tri-axial accelerometers on all loom motors (50 units).\n* Sampling Rate: 4kHz for bearing fault detection.\n\n**2. Power Monitoring:**\n* CT Clamps on main weaving lines to detect load anomalies.\n\n**3. Strategy:**\n* Implement "Just-in-Time" maintenance. \n* **ROI:** Reduce spare part inventory by 35%.\n* **Net Gain:** $85,000/year.`;
                    } else {
                        aiResponseText = `### ‚öôÔ∏è General Industrial Strategy\n\n**Analysis for:** "${inputRaw}"\n\n**Recommended Architecture:**\n1. **Edge Node:** Raspberry Pi 4 or Nvidia Jetson for local inference.\n2. **Communication:** LoRaWAN for long-range sensor data.\n3. **Cloud Layer:** AWS IoT Greengrass + Preda EDE Core.\n\n**Projected Efficiency Gain:** 12-15% within Q1.`;
                    }
                } else {
                    // Chat Mode
                    if (lowerInput.includes("hello") || lowerInput.includes("hi")) {
                        aiResponseText = "Systems online. Connect me to your facility data or ask about our Economic Decision Engine.";
                    } else if (lowerInput.includes("roi") || lowerInput.includes("money") || lowerInput.includes("cost")) {
                        aiResponseText = "Our EDE engine typically delivers **250-300% ROI** within the first 12 months by preventing catastrophic failures and optimizing energy usage.";
                    } else {
                        aiResponseText = "I've analyzed that request. To provide a specific calculation, I would need access to your SCADA historical logs. For now, I estimate a **15% efficiency gap** in your current setup.";
                    }
                }

                // --- REAL API FETCH (Uncomment to use real OpenAI/Gemini) ---
                /*
                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer YOUR_API_KEY_HERE'
                        },
                        body: JSON.stringify({
                            model: "gpt-3.5-turbo",
                            messages: [{role: "user", content: "Act as an industrial IoT expert. " + inputRaw}]
                        })
                    });
                    const data = await response.json();
                    aiResponseText = data.choices[0].message.content;
                } catch (error) {
                    aiResponseText = "Error connecting to AI Server.";
                }
                */

                // Render Output
                const htmlContent = md.render(aiResponseText);
                
                if (mode === 'strategy') {
                    outputContainer.innerHTML = htmlContent;
                    document.getElementById(btnId).innerText = "Generate Plan";
                    document.getElementById(btnId).disabled = false;
                } else {
                    document.getElementById('temp-loading').remove();
                    outputContainer.innerHTML += `
                        <div class="chat-msg-bot p-3 rounded-r-lg rounded-bl-lg text-sm text-gray-200">
                            <span class="text-xs text-cyan-400 block mb-1 font-mono">PREDA_CORE</span>
                            ${htmlContent}
                        </div>
                    `;
                    outputContainer.scrollTop = outputContainer.scrollHeight;
                }

            }, 1500); // 1.5s simulated delay for realism
        }

        function handleChatKey(e) {
            if(e.key === 'Enter') runAI('chat');
        }

        // 4. Three.js Background Animation (Simple Grid)
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const geometry = new THREE.PlaneGeometry(100, 100, 50, 50);
        const material = new THREE.MeshBasicMaterial({ color: 0x00f3ff, wireframe: true, transparent: true, opacity: 0.1 });
        const grid = new THREE.Mesh(geometry, material);
        grid.rotation.x = Math.PI / 2;
        scene.add(grid);

        camera.position.y = 10;
        camera.position.z = 20;

        function animate() {
            requestAnimationFrame(animate);
            grid.rotation.z += 0.002;
            grid.position.z = (Date.now() * 0.001) % 2;
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
