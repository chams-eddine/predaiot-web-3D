<!--
  PredaIoT Landing Page
  A futuristic, dark-themed landing page using Tailwind CSS for a Quantum-Enhanced Industrial AI company.
  Includes the Gemini API integration template for the contact form functionality.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PredaIoT | Quantum Intelligence for Industrial Optimization</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide icons (for icons) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Font setup: Inter (default) and Orbitron (for titles) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        :root {
            font-family: 'Inter', sans-serif;
        }
        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }
        .gradient-text {
            background-image: linear-gradient(to right, #00C6FF, #0072FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        .cyber-button {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .cyber-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            z-index: -1;
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s ease-out;
        }
        .cyber-button:hover::before {
            transform: scaleX(1);
            transform-origin: left;
        }
        .input-glow:focus {
            box-shadow: 0 0 0 2px #0f172a, 0 0 0 4px #06b6d4;
            border-color: #06b6d4;
        }
        /* Custom styling for details/summary element */
        details summary {
            cursor: pointer;
            padding: 0.5rem 0;
            list-style: none; /* Remove default marker */
            position: relative;
        }
        details summary::after {
            content: "\25BE"; /* Unicode for black down-pointing small triangle */
            position: absolute;
            right: 0;
            transition: transform 0.2s ease;
        }
        details[open] summary::after {
            transform: rotate(180deg); /* Rotate triangle when open */
        }
        details summary::-webkit-details-marker {
            display: none; /* For Chrome/Safari */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300 min-h-screen">

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-95 flex items-center justify-center z-[100] transition-opacity duration-300 hidden">
        <div class="flex flex-col items-center">
            <div class="animate-spin rounded-full h-12 w-12 border-4 border-cyan-500 border-t-transparent"></div>
            <p class="mt-4 text-cyan-400 font-orbitron text-lg">Processing Quantum Query...</p>
        </div>
    </div>

    <!-- Message Box -->
    <div id="message-box" class="fixed top-5 right-5 z-[90] p-4 rounded-lg shadow-xl text-white transform transition-transform duration-300 translate-x-full"></div>

    <!-- Navigation Bar -->
    <header class="sticky top-0 z-50 bg-gray-900/90 backdrop-blur-sm border-b border-cyan-800/50 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center gap-4 group cursor-pointer" onclick="window.scrollTo(0,0)">
                    <div class="relative w-10 h-10">
                        <!-- Image of Quantum logo placeholder -->
                        <div class="absolute inset-0 bg-cyan-500 blur-md opacity-50 group-hover:opacity-100 transition-opacity"></div>
                        <img src="image_5b014b.png" onerror="this.src='https://via.placeholder.com/40x40?text=P'" alt="Logo" class="relative w-full h-full rounded border border-cyan-400 object-cover" />
                    </div>
                    <div>
                        <span class="text-2xl font-black tracking-widest font-orbitron text-white">PREDA<span class="text-cyan-400">IoT</span></span>
                        <div class="text-[0.6rem] text-purple-400 font-mono tracking-[0.3em] uppercase leading-none">Quantum Autonomous</div>
                    </div>
                </div>
                <nav class="hidden md:flex space-x-8 text-sm font-medium">
                    <a href="#hero" class="text-gray-400 hover:text-cyan-400 transition duration-150 relative group">
                        Home
                        <span class="absolute left-0 bottom-0 h-[2px] w-0 bg-cyan-400 group-hover:w-full transition-all duration-300"></span>
                    </a>
                    <a href="#technology" class="text-gray-400 hover:text-cyan-400 transition duration-150 relative group">
                        Technology
                        <span class="absolute left-0 bottom-0 h-[2px] w-0 bg-cyan-400 group-hover:w-full transition-all duration-300"></span>
                    </a>
                    <a href="#impact" class="text-gray-400 hover:text-cyan-400 transition duration-150 relative group">
                        Impact
                        <span class="absolute left-0 bottom-0 h-[2px] w-0 bg-cyan-400 group-hover:w-full transition-all duration-300"></span>
                    </a>
                    <a href="#team" class="text-gray-400 hover:text-cyan-400 transition duration-150 relative group">
                        Team
                        <span class="absolute left-0 bottom-0 h-[2px] w-0 bg-cyan-400 group-hover:w-full transition-all duration-300"></span>
                    </a>
                    <a href="#contact" class="text-gray-400 hover:text-cyan-400 transition duration-150 relative group">
                        Contact
                        <span class="absolute left-0 bottom-0 h-[2px] w-0 bg-cyan-400 group-hover:w-full transition-all duration-300"></span>
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- 1. Hero Section -->
        <div id="hero" class="relative overflow-hidden pt-20 pb-24 md:pt-32 md:pb-40 bg-cover bg-center" style="background-image: url('https://placehold.co/1920x1080/0f172a/1e293b?text=CYBER+GRID');">
            <!-- Overlay with gradient/blur -->
            <div class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm"></div>
            <div class="relative container mx-auto px-4 text-center">
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-5xl md:text-7xl font-extrabold text-white leading-tight font-orbitron drop-shadow-lg">
                        <span class="gradient-text">Quantum AI</span> for <span class="text-cyan-400">Autonomous</span> Industrial Assets
                    </h1>
                    <p class="mt-6 text-xl md:text-2xl text-gray-400 font-light max-w-2xl mx-auto">
                        Unlock 24.57% Revenue Gain by eliminating inefficiency with our patent-pending, profit-driven optimization engine.
                    </p>
                    <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
                        <a href="#technology" class="cyber-button px-8 py-3 rounded-full text-white font-bold border-2 border-cyan-500 shadow-xl shadow-cyan-500/30">
                            Explore Q.ADA
                        </a>
                        <a href="#contact" class="px-8 py-3 rounded-full text-cyan-400 font-bold border-2 border-cyan-700 hover:border-cyan-500 hover:text-white transition duration-300">
                            Schedule a Demo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Value Proposition Grid -->
        <div class="py-16 bg-gray-800/50 border-t border-b border-cyan-800/50">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                    <div class="p-4 border-r border-cyan-900">
                        <i data-lucide="zap" class="w-8 h-8 text-cyan-400 mx-auto mb-2"></i>
                        <p class="text-3xl font-bold text-white font-orbitron">24.57%</p>
                        <p class="text-sm text-gray-400">Revenue Increase</p>
                    </div>
                    <div class="p-4 border-r border-cyan-900">
                        <i data-lucide="cpu" class="w-8 h-8 text-purple-400 mx-auto mb-2"></i>
                        <p class="text-3xl font-bold text-white font-orbitron">48x</p>
                        <p class="text-sm text-gray-400">Faster Optimization</p>
                    </div>
                    <div class="p-4 border-r border-cyan-900">
                        <i data-lucide="gauge" class="w-8 h-8 text-green-400 mx-auto mb-2"></i>
                        <p class="text-3xl font-bold text-white font-orbitron">99.9%</p>
                        <p class="text-sm text-gray-400">Efficiency Rate</p>
                    </div>
                    <div class="p-4">
                        <i data-lucide="shield-half" class="w-8 h-8 text-red-400 mx-auto mb-2"></i>
                        <p class="text-3xl font-bold text-white font-orbitron">0%</p>
                        <p class="text-sm text-gray-400">Unplanned Downtime</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Technology Section (Q.ADA) -->
        <div id="technology" class="py-24 bg-gray-900">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-extrabold text-center font-orbitron mb-4 text-white">
                    Q.ADA: The Quantum Optimization Engine
                </h2>
                <p class="text-xl text-center text-cyan-400 mb-16 max-w-3xl mx-auto">
                    A hybrid quantum-classical system that transforms data into guaranteed economic outcomes.
                </p>

                <div class="flex flex-wrap md:flex-nowrap gap-12 items-center">
                    <!-- Text Content -->
                    <div class="md:w-1/2 space-y-8">
                        <div class="p-6 bg-gray-800 rounded-xl border border-cyan-700/50 shadow-lg hover:shadow-cyan-500/20 transition duration-300">
                            <h3 class="flex items-center text-2xl font-bold text-white mb-2">
                                <i data-lucide="git-branch" class="w-6 h-6 text-purple-400 mr-3"></i>
                                Classical Layer: Real-Time Monitoring
                            </h3>
                            <p class="text-gray-400">Processes vast streams of IoT data, identifies anomalies, and manages the real-time operational state of all assets. It acts as the backbone for data ingestion and execution control.</p>
                        </div>
                        <div class="p-6 bg-gray-800 rounded-xl border border-cyan-700/50 shadow-lg hover:shadow-cyan-500/20 transition duration-300">
                            <h3 class="flex items-center text-2xl font-bold text-white mb-2">
                                <i data-lucide="sparkles" class="w-6 h-6 text-cyan-400 mr-3"></i>
                                Quantum Layer: Combinatorial Optimization
                            </h3>
                            <p class="text-gray-400">Leverages nine integrated quantum research methodologies to solve optimization problems (like scheduling, maintenance, and resource allocation) 48x faster than traditional supercomputers.</p>
                        </div>
                        <div class="p-6 bg-gray-800 rounded-xl border border-cyan-700/50 shadow-lg hover:shadow-cyan-500/20 transition duration-300">
                            <h3 class="flex items-center text-2xl font-bold text-white mb-2">
                                <i data-lucide="wallet" class="w-6 h-6 text-green-400 mr-3"></i>
                                Economic Decision Engine
                            </h3>
                            <p class="text-gray-400">Every decision Q.ADA makes is filtered through an economic model, ensuring that the prescribed action (e.g., maintenance vs. continued operation) yields maximum profit.</p>
                        </div>
                    </div>
                    <!-- Image/Diagram -->
                    <div class="md:w-1/2 flex justify-center items-center">
                        <!-- Image of Q.ADA architecture placeholder -->
                        <img src="https://placehold.co/500x350/1e293b/06b6d4?text=Q.ADA+Hybrid+Architecture"
                            alt="Diagram of Quantum-Classical Hybrid System"
                            class="rounded-xl shadow-2xl border border-cyan-600/50 w-full max-w-md md:max-w-full"
                            onerror="this.onerror=null; this.src='https://placehold.co/500x350/1e293b/06b6d4?text=Q.ADA+Hybrid+Architecture';"/>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Impact Section (Case Study/Metrics) -->
        <div id="impact" class="py-24 bg-gray-800/70 border-t border-b border-purple-800/50">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-extrabold text-center font-orbitron mb-4 text-white">
                    Proven Impact: Muscat Energy Case Study
                </h2>
                <p class="text-xl text-center text-purple-400 mb-12 max-w-3xl mx-auto">
                    Tangible results from a full-scale deployment in the Gulf Cooperation Council (GCC) region.
                </p>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Metric Card 1 -->
                    <div class="p-6 bg-gray-900 rounded-xl border border-purple-700 shadow-xl text-center hover:bg-gray-700/50 transition duration-300">
                        <i data-lucide="trending-up" class="w-10 h-10 text-green-400 mx-auto mb-3"></i>
                        <p class="text-5xl font-extrabold text-white font-orbitron">24.57%</p>
                        <p class="mt-2 text-gray-300 text-lg">Avg. Revenue Gain</p>
                        <p class="text-sm text-gray-500">Across 12-month period.</p>
                    </div>

                    <!-- Metric Card 2 -->
                    <div class="p-6 bg-gray-900 rounded-xl border border-purple-700 shadow-xl text-center hover:bg-gray-700/50 transition duration-300">
                        <i data-lucide="cloud-off" class="w-10 h-10 text-red-400 mx-auto mb-3"></i>
                        <p class="text-5xl font-extrabold text-white font-orbitron">8,234 kg</p>
                        <p class="mt-2 text-gray-300 text-lg">CO₂ Reduction</p>
                        <p class="text-sm text-gray-500">From optimized energy use (Farm 7).</p>
                    </div>

                    <!-- Metric Card 3 -->
                    <div class="p-6 bg-gray-900 rounded-xl border border-purple-700 shadow-xl text-center hover:bg-gray-700/50 transition duration-300">
                        <i data-lucide="clock" class="w-10 h-10 text-yellow-400 mx-auto mb-3"></i>
                        <p class="text-5xl font-extrabold text-white font-orbitron">10+ Years</p>
                        <p class="mt-2 text-gray-300 text-lg">Proven Reliability</p>
                        <p class="text-sm text-gray-500">In energy sector environments.</p>
                    </div>
                </div>

                <!-- Comparison Image -->
                <div class="mt-16 text-center">
                    <img src="PredAIoT_Before_vs_After_Comparison.jpg-e10c15cd-cef7-48b9-b20f-cd572ba2d8de"
                         alt="Comparison of solar panel yield before and after PredaIoT optimization"
                         class="rounded-xl shadow-2xl border border-purple-600/50 mx-auto max-w-full lg:max-w-4xl"
                         onerror="this.onerror=null; this.src='https://placehold.co/800x400/2d3748/ffffff?text=Yield+Report+Comparison+Chart';"/>
                    <p class="mt-4 text-sm italic text-gray-500">Visual data showing performance uplift across key industrial assets.</p>
                </div>
            </div>
        </div>

        <!-- 5. Team Section -->
        <div id="team" class="py-24 bg-gray-900 border-t border-cyan-800">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-extrabold text-center font-orbitron mb-4 text-white">
                    The Leadership Core
                </h2>
                <p class="text-xl text-center text-cyan-400 mb-16 max-w-3xl mx-auto">
                    Pioneering the future of autonomous, quantum-enhanced industrial intelligence.
                </p>

                <!-- Team Member Cards - Adjusted to center 2 profiles -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto">
                    <!-- Member 1: Chams Eddine Madi -->
                    <div class="p-6 bg-gray-800/70 border border-cyan-700/50 rounded-xl shadow-2xl hover:bg-gray-700/80 transition duration-300 transform hover:scale-[1.02] backdrop-blur-sm">
                        <img class="w-24 h-24 rounded-full mx-auto object-cover border-4 border-cyan-500 shadow-cyan-500/50 shadow-lg"
                             src="https://placehold.co/128x128/06b6d4/ffffff?text=C"
                             alt="Chams Eddine Madi"
                             onerror="this.onerror=null; this.src='https://placehold.co/128x128/06b6d4/ffffff?text=C';" />
                        <h3 class="mt-4 text-xl font-bold text-white text-center font-orbitron">Chams Eddine Madi</h3>
                        <p class="text-sm text-cyan-400 text-center font-mono">Founder & CEO</p>
                        
                        <p class="mt-4 text-gray-400 text-sm text-center">
                            Chams is a deep-tech entrepreneur and visionary systems architect with over a decade of early hands-on experience in intelligent automation, data systems, and applied artificial intelligence.
                        </p>
                        
                        <!-- Full Bio in Details tag -->
                        <details class="mt-4 text-gray-500 text-sm">
                            <summary class="text-cyan-500 hover:text-cyan-300 font-medium">Read Full Bio</summary>
                            <div class="mt-2 pt-2 border-t border-gray-700 space-y-3">
                                <p>Unlike conventional founders who enter technology through formal pathways, Chams’ journey began organically, through real-world industrial problems that demanded real solutions.</p>
                                <p>His earliest exposure to the energy sector began in 2012, when his family operated a solar panel cleaning and maintenance business. During operations, customers would frequently raise a critical question: “Why is energy efficiency still dropping even after cleaning?” This recurring concern sparked Chams’ obsession with understanding the hidden, unseen layers behind system inefficiencies.</p>
                                <p>From a young age, he showed strong technical instincts. Over the next decade, he continuously refined this thinking by studying system intelligence, decision theory, economic optimization, and autonomous logic frameworks. This journey ultimately led to the creation of PREDAIOT’s Economic Decision Engine™, a system that does not simply monitor or predict outcomes, but actively prescribes the most profitable decision an industrial asset can make in real time.</p>
                                <p>As CEO, Chams leads product architecture, AI logic design, and long-term technological vision. He operates at the intersection of data science, economic modelling, and industrial engineering, building technologies not for visibility, but for financial impact.</p>
                                <p class="text-center font-bold italic mt-4 text-white">"Data without decision is noise. Decision without profitability is waste."</p>
                                <p>Chams is building PREDAIOT to become the global standard for profit-driven industrial intelligence.</p>
                            </div>
                        </details>
                    </div>

                    <!-- Member 2: Sumaiya -->
                    <div class="p-6 bg-gray-800/70 border border-cyan-700/50 rounded-xl shadow-2xl hover:bg-gray-700/80 transition duration-300 transform hover:scale-[1.02] backdrop-blur-sm">
                        <img class="w-24 h-24 rounded-full mx-auto object-cover border-4 border-cyan-500 shadow-cyan-500/50 shadow-lg"
                             src="https://placehold.co/128x128/38bdf8/0f172a?text=S"
                             alt="Sumaiya"
                             onerror="this.onerror=null; this.src='https://placehold.co/128x128/38bdf8/0f172a?text=S';" />
                        <h3 class="mt-4 text-xl font-bold text-white text-center font-orbitron">Sumaiya</h3>
                        <p class="text-sm text-cyan-400 text-center font-mono">Co-Founder & CSO</p>
                        
                        <p class="mt-4 text-gray-400 text-sm text-center">
                            Sumaiya is a strategic business architect with deep experience across the GCC markets, known for transforming early-stage technologies into scalable commercial opportunities.
                        </p>
                        
                        <!-- Full Bio in Details tag -->
                        <details class="mt-4 text-gray-500 text-sm">
                            <summary class="text-cyan-500 hover:text-cyan-300 font-medium">Read Full Bio</summary>
                            <div class="mt-2 pt-2 border-t border-gray-700 space-y-3">
                                <p>Her journey is rooted in execution, network intelligence, and a rare ability to connect technology with market realities. She has worked extensively inside live industrial ecosystems, engaging directly with energy, infrastructure, and industrial stakeholders across Oman and wider GCC.</p>
                                <p>At PREDAIOT, Sumaiya leads: Business strategy, Investor positioning, Partnerships and expansion, and Market penetration across GCC and India. She acts as the bridge between deep technology and commercial reality. Her role is not just to grow the company, but to position it correctly in front of the right stakeholders, at the right time, with the right narrative.</p>
                                <p>Her strength lies in simplifying complex systems into powerful business stories and translating visionary technology into measurable commercial outcomes. She has built strong working relationships across government-linked organizations, private energy players, and startup ecosystems throughout the region.</p>
                                <p class="text-center font-bold italic mt-4 text-white">"The future belongs to companies that don’t react, but decide in advance."</p>
                                <p>Her long-term vision for PREDAIOT is to make it not just a product company, but a movement, redefining how industries think about intelligence, profitability, and autonomous decision-making.</p>
                            </div>
                        </details>
                    </div>

                </div>
            </div>
        </div>

        <!-- 6. Contact Section (with LLM Integration) -->
        <div id="contact" class="py-24 bg-gray-800/70 border-t border-purple-800/50">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-extrabold text-center font-orbitron mb-4 text-white">
                    Start Your Quantum Transformation
                </h2>
                <p class="text-xl text-center text-purple-400 mb-12 max-w-3xl mx-auto">
                    Connect with our team to discuss pilot programs, investment opportunities, and technical deep dives.
                </p>

                <div class="max-w-xl mx-auto p-8 bg-gray-900 rounded-xl shadow-2xl border border-purple-700/50">
                    <form id="contact-form" class="space-y-6">
                        <div>
                            <label for="query" class="block text-sm font-medium text-gray-300 mb-2">Your Inquiry / Request for Information</label>
                            <textarea id="query" name="query" rows="4" required class="w-full p-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white input-glow focus:outline-none"></textarea>
                            <p class="mt-2 text-xs text-gray-500">Describe your challenge or what information you need (e.g., "I'm a VC interested in Due Diligence materials," or "How can PredaIoT optimize my wind farm fleet?").</p>
                        </div>
                        <button type="submit" id="submit-button" class="cyber-button w-full px-4 py-3 rounded-lg text-white font-bold text-lg border-2 border-purple-500 shadow-xl shadow-purple-500/30">
                            Submit Quantum Query
                        </button>
                    </form>
                    <div id="response-area" class="mt-8 p-4 bg-gray-800 rounded-lg border border-purple-800 hidden">
                        <h4 class="text-lg font-bold text-purple-400 mb-2 font-orbitron">PREDAIoT AI Response</h4>
                        <p id="response-text" class="text-gray-300"></p>
                        <div id="source-list" class="mt-4 text-xs text-gray-500 italic space-y-1"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-cyan-900/50">
        <div class="container mx-auto px-4 py-8 text-center text-sm text-gray-500">
            &copy; <span id="current-year"></span> PREDAIoT. Quantum Intelligence for Industrial Assets.
            <div class="mt-2 flex justify-center space-x-4">
                <i data-lucide="linkedin" class="w-4 h-4 text-cyan-500"></i>
                <i data-lucide="twitter" class="w-4 h-4 text-cyan-500"></i>
            </div>
        </div>
    </footer>

    <script type="module">
        // --- Utility Functions ---

        // Function to show a temporary message box
        function showMessage(message, type = 'success', duration = 4000) {
            const messageBox = document.getElementById('message-box');
            messageBox.textContent = message;

            // Set colors based on type
            if (type === 'error') {
                messageBox.classList.add('bg-red-700');
                messageBox.classList.remove('bg-green-700', 'bg-yellow-700');
            } else if (type === 'warning') {
                messageBox.classList.add('bg-yellow-700');
                messageBox.classList.remove('bg-green-700', 'bg-red-700');
            } else { // success or default
                messageBox.classList.add('bg-green-700');
                messageBox.classList.remove('bg-red-700', 'bg-yellow-700');
            }

            // Show and then hide
            messageBox.classList.remove('translate-x-full');
            messageBox.classList.add('translate-x-0');

            setTimeout(() => {
                messageBox.classList.remove('translate-x-0');
                messageBox.classList.add('translate-x-full');
            }, duration);
        }

        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Initialize Lucide icons
        lucide.createIcons();

        // --- Gemini API Call Setup ---

        const contactForm = document.getElementById('contact-form');
        const submitButton = document.getElementById('submit-button');
        const loadingOverlay = document.getElementById('loading-overlay');
        const responseArea = document.getElementById('response-area');
        const responseText = document.getElementById('response-text');
        const sourceList = document.getElementById('source-list');

        const apiKey = ""; // Canvas will automatically provide the key at runtime
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // Exponential Backoff Retry Logic
        async function fetchWithRetry(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok && response.status === 429 && i < maxRetries - 1) {
                        // Rate limit error (429), wait and retry
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) {
                        throw error;
                    }
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }


        async function handleContactSubmit(event) {
            event.preventDefault();
            const userQuery = document.getElementById('query').value.trim();

            if (!userQuery) {
                showMessage("Please enter your inquiry before submitting.", 'warning');
                return;
            }

            // Disable button and show loading
            submitButton.disabled = true;
            submitButton.textContent = "Processing...";
            loadingOverlay.classList.remove('hidden');

            try {
                // System Instruction: Act as a helpful, professional, and responsive member of the PREDAIoT business development team.
                // Address the user's query clearly and professionally.
                const systemPrompt = `You are the PREDAIoT Business Development AI. Your role is to provide concise, professional, and grounded responses to investor and client inquiries.
                The company, PREDAIoT, is a quantum-enhanced industrial optimization platform.
                - We offer a patent-pending Quantum AI system (Q.ADA) that drives an average of 24.57% revenue gain by solving complex optimization problems 48x faster.
                - Key members are Chams Eddine Madi (Founder & CEO) and Sumaiya (Co-Founder & CSO).
                - Use a professional, futuristic, and confident tone.
                - Always reference real-time information using the Google Search tool when appropriate (e.g., market trends, technical details).
                - Keep the response brief, max 3-4 sentences.`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }], // Use search grounding for up-to-date context
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                const response = await fetchWithRetry(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    responseText.textContent = text;
                    responseArea.classList.remove('hidden');

                    // Extract and display grounding sources
                    let sources = [];
                    const groundingMetadata = candidate.groundingMetadata;
                    sourceList.innerHTML = '';
                    if (groundingMetadata && groundingMetadata.groundingAttributions) {
                        sources = groundingMetadata.groundingAttributions
                            .map(attribution => ({
                                uri: attribution.web?.uri,
                                title: attribution.web?.title,
                            }))
                            .filter(source => source.uri && source.title);

                        if (sources.length > 0) {
                            sourceList.innerHTML += '<p class="font-bold mt-2">Sources:</p>';
                            sources.forEach((source, index) => {
                                const a = document.createElement('a');
                                a.href = source.uri;
                                a.target = "_blank";
                                a.className = "hover:text-cyan-400 block truncate";
                                a.textContent = `${index + 1}. ${source.title} (${new URL(source.uri).hostname})`;
                                sourceList.appendChild(a);
                            });
                        }
                    }

                    showMessage("Query processed successfully! See the AI response below.", 'success');

                } else {
                    const errorMessage = result.error?.message || "An unexpected error occurred during AI processing.";
                    responseText.textContent = `Error: ${errorMessage}`;
                    responseArea.classList.remove('hidden');
                    showMessage("AI Query failed. Please try again.", 'error');
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                responseText.textContent = `A network error occurred. Please check your connection. Details: ${error.message}`;
                responseArea.classList.remove('hidden');
                showMessage("A severe network error occurred.", 'error');
            } finally {
                // Re-enable button and hide loading
                submitButton.disabled = false;
                submitButton.textContent = "Submit Quantum Query";
                loadingOverlay.classList.add('hidden');
            }
        }

        contactForm.addEventListener('submit', handleContactSubmit);
    </script>
</body>
</html>
